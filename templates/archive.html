<!DOCTYPE html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <title>Gestion des articles archiv√©s</title>

    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <!-- CSS d√©di√© √† CETTE page -->
    <link rel="stylesheet" href="/static/admin_articles.css" />
    <link rel="stylesheet" href="/static/fixe_header.css" />
  </head>

  <body>
    <!-- Barre sup√©rieure -->
    <header class="container header" role="banner">
      <a class="brand" href="/">Journal du lyc√©e</a>

      <nav class="nav" aria-label="Navigation principale">
        <a
          class="nav-link {% if request.url.path == '/' %}is-active{% endif %}"
          href="/"
        >
          Accueil
          <svg
            class="nav-ring"
            aria-hidden="true"
            focusable="false"
            viewBox="0 0 100 40"
            preserveAspectRatio="none"
          >
            <path
              class="nav-ring__stroke"
              pathLength="100"
              d="M50,1.5 H78.5 A18.5,18.5 0 0 1 78.5,38.5 H21.5 A18.5,18.5 0 0 1 21.5,1.5 H50 Z"
            />
          </svg>
        </a>

        <a
          class="nav-link {% if request.url.path.startswith('/categories') %}is-active{% endif %}"
          href="/categories"
        >
          Rubriques
          <svg
            class="nav-ring"
            aria-hidden="true"
            focusable="false"
            viewBox="0 0 100 40"
            preserveAspectRatio="none"
          >
            <path
              class="nav-ring__stroke"
              pathLength="100"
              d="M50,1.5 H78.5 A18.5,18.5 0 0 1 78.5,38.5 H21.5 A18.5,18.5 0 0 1 21.5,1.5 H50 Z"
            />
          </svg>
        </a>

        {% if request.state.user %}
        <a
          class="nav-link {% if request.url.path.startswith('/admin') %}is-active{% endif %}"
          href="/admin"
        >
          Admin Panel
          <svg
            class="nav-ring"
            aria-hidden="true"
            focusable="false"
            viewBox="0 0 100 40"
            preserveAspectRatio="none"
          >
            <path
              class="nav-ring__stroke"
              pathLength="100"
              d="M50,1.5 H78.5 A18.5,18.5 0 0 1 78.5,38.5 H21.5 A18.5,18.5 0 0 1 21.5,1.5 H50 Z"
            />
          </svg>
        </a>
        <a class="nav-link" href="/login/logout">
          D√©connexion
          <svg
            class="nav-ring"
            aria-hidden="true"
            focusable="false"
            viewBox="0 0 100 40"
            preserveAspectRatio="none"
          >
            <path
              class="nav-ring__stroke"
              pathLength="100"
              d="M50,1.5 H78.5 A18.5,18.5 0 0 1 78.5,38.5 H21.5 A18.5,18.5 0 0 1 21.5,1.5 H50 Z"
            />
          </svg>
        </a>
        {% else %}
        <a
          class="nav-link {% if request.url.path.startswith('/login') %}is-active{% endif %}"
          href="/login"
        >
          Connexion
          <svg
            class="nav-ring"
            aria-hidden="true"
            focusable="false"
            viewBox="0 0 100 40"
            preserveAspectRatio="none"
          >
            <path
              class="nav-ring__stroke"
              pathLength="100"
              d="M50,1.5 H78.5 A18.5,18.5 0 0 1 78.5,38.5 H21.5 A18.5,18.5 0 0 1 21.5,1.5 H50 Z"
            />
          </svg>
        </a>
        {% endif %}
      </nav>
    </header>

    <div class="table-card">
      <div class="table-toolbar">
        <h1>Gestion des articles archiv√©s</h1>
        <a href="/admin/articles/create" class="btn pill brand"
          >+ Nouvel article</a
        >
      </div>

      {% if articles and articles|length > 0 %}
      <div class="table-scroll">
        <table class="data-table">
  <tbody>
    {% for article in articles %}
    <tr>
      <td>#{{ article.id }}</td>
      <td>{{ article.title }}</td>
      <td>
        <div class="actions">
          <a href="/admin/articles/edit/{{ article.id }}" class="btn pill success">Modifier</a>
          <form action="/admin/articles/dearchive/{{ article.id }}" method="post" onsubmit="return confirmDelete()">
            <button type="submit" class="btn pill danger">d√©-archiver</button>
          </form>
        </div>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>

      </div>
      {% else %}
      <div class="empty-state">
        <div class="empty-icon">üì∞</div>
        <h3>Aucun article pour le moment</h3>
        <p>Commence par en cr√©er un pour le voir appara√Ætre ici.</p>
        <a href="/admin/articles/create" class="btn pill brand"
          >Cr√©er un article</a
        >
      </div>
      {% endif %}
    </div>

    <div class="backcontainer">
      <a href="/admin" class="back">‚Üê Retour au dashboard</a>
    </div>

    <footer class="container footer" role="contentinfo">
      <div>¬© Journal du lyc√©e Jean VILAR ‚Äî Tous droits r√©serv√©s</div>
      <div class="by">¬© Made by Team LogicPulse</div>
    </footer>
    <script>
      function confirmDelete() {
        return confirm("√ätes-vous s√ªr de vouloir d√©-archiver cet article ?");
      }
    </script>

  </body>
</html>
